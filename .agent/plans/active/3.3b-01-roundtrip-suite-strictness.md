# Plan: 3.3b.01 â€” Round-Trip Suite Strictness (No Weak Assertions)

**Status:** ðŸ”„ Active  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-19 (activated after 3.3a.08 completion)  
**Parent:** [roadmap.md](../roadmap.md) (Session 3.3b)

---

## Goal

Make the round-trip test suite a strict correctness proof:

- no weak assertions (`<=`, "at least", "skip on errors"),
- no early returns that hide failures,
- strict equality where losslessness is required,
- failures must include helpful error context.

---

## Responsibility Boundary

**Begins after:** [3.3a.08 â€” Prove Determinism](../current/complete/3.3a-08-prove-determinism.md) (Session 3.3a complete)
**This plan owns:** Tightening the TEST SUITE assertions only. Making tests strict proofs instead of weak checks.
**This plan does NOT own:** Fixing the code that causes test failures (that's plans 02-07). This plan may reveal failures â€” those are inputs into subsequent plans.
**Successor:** [3.3b.02 â€” Scenario 3 Reference Composition](../current/session-3.3b/3.3b-02-scenario3-reference-composition.md)

---

## Repo Truth

- `lib/tests-roundtrip/__tests__/round-trip.integration.test.ts` currently contains:
  - Scenario 3 "<= schema count" tolerance
  - "expected loss via IR semantics" comments (doctrine violation)
  - early returns when `parseZodSource()` reports errors

---

## Work

1. Remove weak assertions and replace with strict proofs or strict rejection.
2. Remove early returns; errors must fail the test with context.
3. Update suite comments to match doctrine (no content loss).

---

## Acceptance Criteria

- All scenarios are asserted strictly.
- Any parse error causes the test to fail with actionable details.

---

## References

- `lib/tests-roundtrip/__tests__/round-trip.integration.test.ts`
- `.agent/plans/roadmap.md` (Session 3.3b)
- `.agent/directives/VISION.md`
