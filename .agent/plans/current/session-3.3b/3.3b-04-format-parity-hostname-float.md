# Plan: 3.3b.04 â€” Zod Writer Format Parity (hostname, float32/float64)

**Status:** ðŸ”² Not Started  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3b)

---

## Goal

Eliminate format loss in Zod output for IR formats that the parser already models:

- `format: 'hostname'` must emit `z.hostname()` or fail fast.
- `format: 'float'` / `format: 'double'` must emit `z.float32()` / `z.float64()` or fail fast.

---

## Repo Truth

- Zod writer primitives currently emit `z.number()` and `z.string()` for some formats that exist in IR.

---

## Work

1. Implement writer support for hostname/float formats if Zod 4 supports them.
2. If a format cannot be emitted losslessly, throw with context rather than degrading output.
3. Add tests proving strict round-trip preservation for these formats.

---

## Acceptance Criteria

- No format degradation occurs silently in Zod output.
- Round-trip suite catches regressions (strict assertions).

---

## References

- `lib/src/schema-processing/writers/zod/`
- `.agent/acceptance-criteria/zod-output-acceptance-criteria.md`
