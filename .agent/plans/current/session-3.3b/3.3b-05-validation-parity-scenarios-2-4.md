# Plan: 3.3b.05 â€” Validation-Parity Tests for Scenarios 2â€“4

**Status:** ðŸ”² Not Started  
**Priority:** Medium  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3b)

---

## Goal

Extend validation-parity to prove schemas still validate data correctly after round-trips:

- Scenario 2: Zod â†’ IR â†’ Zod
- Scenario 3: OpenAPI â†’ Zod â†’ OpenAPI
- Scenario 4: Zod â†’ OpenAPI â†’ Zod

This goes beyond "counts match" and proves functional equivalence.

---

## Responsibility Boundary

**Begins after:** [3.3b.04 â€” Format Parity](3.3b-04-format-parity-hostname-float.md)
**This plan owns:** Validation-parity test infrastructure and assertions. Proving round-tripped schemas accept/reject the same data as originals.
**This plan does NOT own:** Fixing the code when parity breaks (that feeds back into earlier plans). Or expanding fixture coverage (plan 06).
**Successor:** [3.3b.06 â€” Expand Zod Fixtures](3.3b-06-expand-zod-fixtures.md)

---

## Work

1. Define fixture data sets that must validate for each scenario.
2. Validate against:
   - original schema,
   - round-tripped schema (after parse/write/parse).
3. Assert strict parity for pass/fail cases.

---

## Acceptance Criteria

- Validation-parity covers Scenarios 2â€“4 for representative fixtures.
- Tests fail fast with helpful diffs when parity breaks.

---

## References

- `lib/tests-roundtrip/__tests__/validation-parity*.integration.test.ts`
- `lib/tests-roundtrip/__tests__/round-trip.integration.test.ts`
