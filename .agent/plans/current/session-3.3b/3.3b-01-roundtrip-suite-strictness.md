# Plan: 3.3b.01 â€” Round-Trip Suite Strictness (No Weak Assertions)

**Status:** ðŸ”² Not Started  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3b)

---

## Goal

Make the round-trip test suite a strict correctness proof:

- no weak assertions (`<=`, â€œat leastâ€, â€œskip on errorsâ€),
- no early returns that hide failures,
- strict equality where losslessness is required,
- failures must include helpful error context.

---

## Repo Truth

- `lib/tests-roundtrip/__tests__/round-trip.integration.test.ts` currently contains:
  - Scenario 3 â€œ<= schema countâ€ tolerance
  - â€œexpected loss via IR semanticsâ€ comments (doctrine violation)
  - early returns when `parseZodSource()` reports errors

---

## Work

1. Remove weak assertions and replace with strict proofs or strict rejection.
2. Remove early returns; errors must fail the test with context.
3. Update suite comments to match doctrine (no content loss).

---

## Acceptance Criteria

- All scenarios are asserted strictly.
- Any parse error causes the test to fail with actionable details.

---

## References

- `lib/tests-roundtrip/__tests__/round-trip.integration.test.ts`
- `.agent/plans/roadmap.md` (Session 3.3b)
- `.agent/directives/VISION.md`
