# Plan: 3.3b.07 â€” Nullability Chain Normalization (No Redundant `nullable()`)

**Status:** ðŸ”² Not Started  
**Priority:** Low  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3b)

---

## Goal

Ensure the Zod writer emits a canonical, non-redundant nullability representation:

- avoid emitting chains like `z.null().nullable()` when they add no meaning,
- preserve meaning deterministically,
- keep parser and writer in lockstep.

---

## Work

1. Define the canonical Zod 4 nullability encoding for this repo.
2. Update writer emission to avoid redundant chains.
3. Add tests proving:
   - output is canonical,
   - output is idempotent.

---

## Acceptance Criteria

- No redundant nullability chains are emitted in normalized output.
- Idempotency tests cover the nullability normalization behavior.

---

## References

- `lib/src/schema-processing/writers/zod/`
- `.agent/plans/roadmap.md` (Session 3.3b; strictness blockers)
