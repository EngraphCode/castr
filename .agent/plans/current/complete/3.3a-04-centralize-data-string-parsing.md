# Plan: 3.3a.04 — Repo-Wide ADR-026 Remediation

**Status:** ✅ Complete  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-16 (completed)  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3a)

---

## Goal

Eliminate repo-wide ADR-026 lint debt by centralizing data-string parsing and replacing magic-string comparisons with typed constants/helpers, without weakening detectors.

---

## Final Verification Snapshot (2026-02-16)

```bash
pnpm lint
pnpm type-check
pnpm test
```

| Gate              | Result              |
| ----------------- | ------------------- |
| `pnpm lint`       | ✅ pass (0 errors)  |
| `pnpm type-check` | ✅ pass             |
| `pnpm test`       | ✅ pass (1068/1068) |

Lint debt progression:

- Baseline tracked by this plan: **272 errors**
- Final state: **0 errors**
- Net resolved: **272 errors**

---

## Completion Summary

1. Centralized remaining `$ref`/pointer parsing call sites in OpenAPI builders and conversion helpers.
2. Removed all residual banned string-method usage in Plan 04 scope via structural helpers and lodash function utilities.
3. Replaced residual magic-string comparisons with typed constants across shared utilities, parsers, writers, rendering, and CLI boundaries.
4. Reduced remaining complexity lint blockers via helper extraction (`builder.dependency-graph`, IR validators, Zod writer context helper).
5. Added `json-schema-constants.ts` and `writers/zod/context-utils.ts` to keep discriminants and context checks centralized.

---

## Acceptance Criteria

- `pnpm lint` reaches zero errors without rule suppression: ✅
- `$ref`/pointer/path/media-type parsing remains centralized and fail-fast: ✅
- No detector weakening or rule bypasses introduced: ✅
- No regressions in parser/writer behavior (`pnpm test` green): ✅
- Type safety preserved (`pnpm type-check` green): ✅

---

## Successor

Next plan: [3.3a.05 — Remove Permissive Fallbacks](../session-3.3a/3.3a-05-remove-permissive-fallbacks.md)
