# Plan: 3.3a.02 â€” ESLint ADR-026 Enforcement Redesign

**Status:** ðŸ”² Not Started  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3a)

---

## Goal

Enable ADR-026 enforcement in a way that matches the agreed scope:

- keep repo-wide regex restrictions active (no override loopholes),
- target TS-source parsing heuristics (ts-morph parsing code),
- do not ban legitimate string usage in data-string parsing utilities,
- avoid broad selectors that produce noise and force workarounds.

---

## Repo Truth

- ESLint config is `lib/eslint.config.ts` (no repo-root `eslint.config.ts`).
- Current schema-processing override disables `no-restricted-syntax` (`lib/eslint.config.ts:249`), which also disables earlier regex selectors for those files.

---

## Work

1. Remove the schema-processing override that turns `no-restricted-syntax` off.
2. Re-scope ADR-026 selectors to TS-source parsing modules only.
3. Narrow or remove selectors that would ban legitimate narrowing (`kind === 'schema'`, `typeof x === 'string'`, discriminated unions).
4. Turn ADR-026 rules on as `error` for the intended scopes.
5. Prove the enforcement cannot be bypassed by moving code into another folder.

---

## Acceptance Criteria

- `pnpm lint` fails on new ADR-026 violations in TS-source parsing modules.
- `pnpm lint` does not flag:
  - discriminated-union checks,
  - type narrowing checks,
  - centralized data-string parsing utilities.
- No lint exceptions (`eslint-disable`) are required to pass.

---

## References

- `lib/eslint.config.ts`
- `.agent/directives/RULES.md`
- `docs/architectural_decision_records/ADR-026-no-string-manipulation-for-parsing.md`
