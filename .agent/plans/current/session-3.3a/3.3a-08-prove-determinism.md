# Plan: 3.3a.08 â€” Prove Determinism (Stable Ordering + Tests)

**Status:** ðŸ”² Not Started  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3a)

---

## Goal

Prove byte-for-byte determinism of generated outputs by:

- making ordering explicitly stable wherever it can affect emitted artifacts,
- adding tests that catch nondeterministic output behavior.

---

## Responsibility Boundary

**Begins after:** [3.3a.07 â€” Remove Escape Hatches](3.3a-07-remove-escape-hatches.md)
**This plan owns:** Proving deterministic output â€” stable ordering and tests that verify byte-identical generation across runs. This is the final deliverable of Session 3.3a.
**This plan does NOT own:** Correctness of parsing/writing (plans 03-04), error handling (plans 05-06), or type safety (plan 07).
**Successor:** [3.3b.01 â€” Round-Trip Suite Strictness](../session-3.3b/3.3b-01-roundtrip-suite-strictness.md) (transitions to Session 3.3b)

---

## Work

1. Inventory any ordering derived from:
   - `Object.keys/values/entries()`
   - `Map` iteration where construction order is not guaranteed by input
2. Make ordering explicit (sort keys, stable topological order, stable component ordering).
3. Add tests that run generation twice and assert identical outputs.

---

## Acceptance Criteria

- Deterministic output is proven by tests for representative fixtures.
- There are no nondeterministic iteration-based orderings left in output-critical paths.

---

## References

- `.agent/directives/VISION.md` (Deterministic Output)
- `lib/tests-roundtrip/`
