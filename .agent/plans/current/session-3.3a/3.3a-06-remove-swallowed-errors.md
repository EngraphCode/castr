# Plan: 3.3a.06 â€” Remove Swallowed Errors (Fail Fast With Context)

**Status:** ðŸ”² Not Started  
**Priority:** High  
**Created:** 2026-02-13  
**Last Updated:** 2026-02-13  
**Parent:** [roadmap.md](../../roadmap.md) (Session 3.3a)

---

## Goal

Eliminate "ignore and continue" behavior (`catch {}` / silent skips) from product code paths that build IR or render outputs.

Strict doctrine requires that invalid inputs fail fast and hard with helpful errors.

---

## Responsibility Boundary

**Begins after:** [3.3a.05 â€” Remove Permissive Fallbacks](3.3a-05-remove-permissive-fallbacks.md)
**This plan owns:** INPUT/PROCESSING errors that are silently swallowed â€” invalid `$ref` values ignored, declarations silently skipped on parse failure, empty `catch {}` blocks.
**This plan does NOT own:** Output degradation where code returns a lossy result (that's plan 05). The distinction: 05 = "we produced wrong output silently", 06 = "we ignored bad input silently".
**Successor:** [3.3a.07 â€” Remove Escape Hatches](3.3a-07-remove-escape-hatches.md)

---

## Repo Truth (Known Hotspots)

- Invalid `$ref` values are currently ignored in:
  - `lib/src/schema-processing/context/template-context.endpoints.dependencies.ts`
- Some Zod declarations are silently skipped on parse failure:
  - `lib/src/schema-processing/parsers/zod/zod-parser.ts` (skips when `schema` is falsy)

---

## Work

1. Replace swallowed errors with structured failures that include:
   - what failed,
   - where it failed (schema name, ref string, source location if available),
   - what to do next (actionable guidance).
2. Add tests proving that invalid inputs fail and produce helpful messages.

---

## Acceptance Criteria

- No swallowed errors remain in strict pipeline code paths.
- No "silent skip" behavior remains for parseable declarations.

---

## References

- `lib/src/schema-processing/context/template-context.endpoints.dependencies.ts`
- `lib/src/schema-processing/parsers/zod/zod-parser.ts`
- `.agent/directives/RULES.md`
